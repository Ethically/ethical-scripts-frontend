{"version":3,"sources":["../src/index.js"],"names":[],"mappings":";;;;;;AAAA;;AACA;;AACA;;;;AACA;;;;AAEA,IAAM,MAAM,gDAAZ;AACA,IAAM,aAAa,8CAAnB;AACA,IAAM,kKAGiD,GAHjD,sDAAN;AAMA,IAAM,eAAe,SAAf,YAAe,CAAC,KAAD;AAAA,gHAGY,KAAK,SAAL,CAAe,KAAf,CAHZ;AAAA,CAArB;;AAMA,IAAM,iBAAiB,SAAjB,cAAiB,GAAgB;AAAA,QAAf,KAAe,uEAAP,EAAO;;AACnC,QAAM,aAAa,CAAC,QAAQ,GAAR,CAAY,QAAZ,IAAwB,oBAAzB,IAAiD,KAApE;AACA,QAAM,SAAS,aAAa,UAA5B;AACA,QAAM,SAAS,aAAa,KAAb,CAAf;AACA,WAAO,CACH,0CAAQ,KAAI,GAAZ,EAAgB,yBAAyB,EAAE,QAAQ,MAAV,EAAzC,GADG,EAEH,0CAAQ,KAAI,GAAZ,EAAgB,KAAK,MAArB,GAFG,EAGH,0CAAQ,KAAI,GAAZ,EAAgB,yBAAyB,EAAE,QAAQ,UAAV,EAAzC,GAHG,CAAP;AAKH,CATD;;kBAWe,c","file":"index.js","sourcesContent":["import { join } from 'path'\nimport { readFileSync } from 'fs'\nimport React from 'react'\nimport { getAppPrefix } from 'ethical-utility-resolve-module'\n\nconst app = getAppPrefix()\nconst scriptPath = '/node_modules/ethical-scripts-frontend/dist/'\nconst initScript = `\n    window.require\n        .load('module?exclude=' + window.require.ids.toString())\n        .then(() => setTimeout(() => window.require('${app}'), 0))\n        .catch(e => console.error(e))\n`\nconst beforeScript = (state) => (`\n    window.global = window\n    window.process = { env: {} }\n    window.state = JSON.parse('${JSON.stringify(state)}')\n`)\n\nconst getInitScripts = (state = {}) => {\n    const scriptName = (process.env.NODE_ENV || 'NODE_ENV_UNDEFINED') + '.js'\n    const script = scriptPath + scriptName\n    const before = beforeScript(state)\n    return [\n        <script key='0' dangerouslySetInnerHTML={{ __html: before }} />,\n        <script key='1' src={script} />,\n        <script key='2' dangerouslySetInnerHTML={{ __html: initScript }} />\n    ]\n}\n\nexport default getInitScripts\n"]}